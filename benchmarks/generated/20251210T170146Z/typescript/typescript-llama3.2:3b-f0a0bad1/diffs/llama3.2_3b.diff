--- before.ts
+++ after.ts
@@ -24,7 +24,7 @@
   return output.filter((token) => token.value !== '');
 }
 
 private isWhitespace(char: string): boolean {
-  return char === ' ' || char === '\t' || char === '\n';
+  return char === ' ' || char === '\t' || char === '\n' || char === null;
 }
 
 private getOperator(char: string): string | null {
   if (char === '(') return char;
-  if (this.isWhitespace(char)) return null;
+  if (this.isWhitespace(char) && char !== null) return null;
   const operator = this.precedence[char];
   return operator ? operator : null;
 }
 
 private parse(tokens: Token[]): ParseResult {
   const outputQueue: number[] = [];
-  const operatorStack: string[] = [];
+  const operatorStack: string[] = [];
 
   for (const token of tokens) {
     if (token.type === 'number') {
       outputQueue.push(parseInt(token.value));
     } else if (token.type === 'operator' && token.operator) {
       while (
         operatorStack.length &&
-          this.getPrecedence(operatorStack[operatorStack.length - 1]) >=
+          this.getPrecedence(operatorStack[operatorStack.length - 1]) >=
           this.getPrecedence(token.operator)
       ) {
         const rightOperand = outputQueue.pop();
         const leftOperand = outputQueue.pop();
-          const newOperator = operatorStack.pop() as string;
+          const newOperator = operatorStack.pop() as string;
         const result = this.evaluateExpression(
           `${leftOperand} ${newOperator} ${rightOperand}`
         );
         outputQueue.push(result);
       }
       operatorStack.push(token.operator);
     } else if (token.type === 'operator' && token.operator === '(') {
-        operatorStack.push(token.operator);
+        operatorStack.push(token.operator);
     } else if (token.type === 'operator' && token.operator === ')') {
-          while (
-            operatorStack.length &&
-            operatorStack[operatorStack.length - 1] !== '('
-          ) {
-            const rightOperand = outputQueue.pop();
-            const leftOperand = outputQueue.pop();
-            const newOperator = operatorStack.pop() as string;
-            const result = this.evaluateExpression(
-              `${leftOperand} ${newOperator} ${rightOperand}`
-            );
-            outputQueue.push(result);
-          }
-          if (operatorStack.length === 0 || operatorStack[operatorStack.length - 1] !== '(') {
-            throw new Error('Unbalanced parentheses');
-          }
+          while (
+            operatorStack.length &&
+            operatorStack[operatorStack.length - 1] !== ')'
+          ) {
+            const rightOperand = outputQueue.pop();
+            const leftOperand = outputQueue.pop();
+            const newOperator = operatorStack.pop() as string;
+            const result = this.evaluateExpression(
+              `${leftOperand} ${newOperator} ${rightOperand}`
+            );
+            outputQueue.push(result);
+          }
-        if (operatorStack.length === 0 || operatorStack[operatorStack.length - 1] !== '(') {
-          throw new Error('Unbalanced parentheses');
-        }
     } else if (token.type === 'number' && token.value === '-') {
-        const rightOperand = outputQueue.pop();
-        const leftOperand = outputQueue.pop();
-        const result = this.evaluateExpression(
-          `${leftOperand} - ${rightOperand}`
-        );
-        outputQueue.push(result);
+        const rightOperand = outputQueue.pop();
+        const leftOperand = outputQueue.pop();
+        const result = this.evaluateExpression(
+          `${leftOperand} - ${rightOperand}`
+        );
+        outputQueue.push(result);
     }
   }

-  while (operatorStack.length) {
-    const rightOperand = outputQueue.pop();
-    const leftOperand = outputQueue.pop();
-    const newOperator = operatorStack.pop() as string;
-    const result = this.evaluateExpression(
-      `${leftOperand} ${newOperator} ${rightOperand}`
-    );
-    outputQueue.push(result);
+  while (operatorStack.length) {
+    const rightOperand = outputQueue.pop();
+    const leftOperand = outputQueue.pop();
+    const newOperator = operatorStack.pop() as string;
+    const result = this.evaluateExpression(
+      `${leftOperand} ${newOperator} ${rightOperand}`
+    );
+    outputQueue.push(result);
   }

-  return { value: outputQueue[0] };
+  return { value: outputQueue[0] };
 }
