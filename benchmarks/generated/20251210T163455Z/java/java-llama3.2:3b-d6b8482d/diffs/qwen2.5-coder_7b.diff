--- before.java	2023-04-10 12:34:56.000000000 +0800
+++ after.java	2023-04-10 12:35:07.000000000 +0800
@@ -94,7 +94,7 @@
     }
 
     private Expression parseFactor() {
-        if (tokens.get(pos).getType() == TokenType.LPAREN) {
+        if (pos < tokens.size() && tokens.get(pos).getType() == TokenType.LPAREN) {
             pos++;
             Expression expr = parseExpression();
             pos++; // consume RPAREN
@@ -108,7 +108,7 @@
         } else if (tokens.get(pos).getType() == TokenType.IDENTIFIER && pos < tokens.size() && tokens.get(pos + 1).getType() == TokenType.OP) {
             Operator op = getOperator(tokens.get(pos + 1).getValue());
             Expression right = parseFactor();
-            pos += 2; // consume OP and value
+            pos += 3; // consume OP, identifier, and value
             return new UnaryOp(op, right);
         } else if (tokens.get(pos).getType() == TokenType.IDENTIFIER) {
             String value = tokens.get(pos).getValue();
