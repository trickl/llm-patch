--- before.java
+++ after.java
@@ -35,7 +35,7 @@
             tokens.add(new Token(TokenType.NUMBER, value));
-            }
+            if (token.type == TokenType.NUMBER) {
+                pos++;
+                return (int) token.value;
         } else if (c == '(') {
             tokens.add(new Token(TokenType.LPAREN, null));
             pos++;
@@ -43,7 +43,7 @@
             tokens.add(new Token(TokenType.RPAREN, null));
             pos++;
-        }
+        if (token.type == TokenType.RPAREN) {
+            pos++;
+            return 0;
         } else if (Character.isWhitespace(c)) {
             pos++;
@@ -72,7 +72,7 @@
             if (token.type == TokenType.OPERATOR && (token.value == '+' || token.value == '-')) {
                 pos++;
-                int nextTerm = term();
+                int nextTerm = factor();
                 if (token.value == '+') {
                     result += nextTerm;
                 } else {
@@ -75,7 +75,7 @@
             } else {
                 break;
             }
-        }
+        if (token.type == TokenType.OPERATOR && token.value == '-') {
+            pos++;
+            return -factor();
         } else if (token.type == TokenType.NUMBER) {
             pos++;
@@ -91,7 +91,7 @@
             if (token.type == TokenType.OPERATOR && (token.value == '*' || token.value == '/')) {
                 pos++;
-                int nextFactor = factor();
+                int nextFactor = term();
                 if (token.value == '*') {
                     result *= nextFactor;
                 } else {
@@ -94,7 +94,7 @@
             } else {
                 break;
             }
-        }
+        if (token.type == TokenType.OPERATOR && token.value == '/') {
+            pos++;
+            return factor();
         } else if (token.type == TokenType.NUMBER) {
             pos++;
@@ -108,7 +108,7 @@
             if (token.type == TokenType.LPAREN) {
                 pos++;
-                int value = expression();
+                int value = factor();
                 if (pos  tokens.size() && tokens.get(pos).type == TokenType.RPAREN) {
                     pos++;
-                    return value;
+                    return 0;
                 } else {
@@ -111,7 +111,7 @@
             } else {
                 throw new IllegalArgumentException("Expected ')'");
             }
-        }
+        if (token.type == TokenType.OPERATOR && token.value == '-') {
+            pos++;
+            return -factor();
         } else if (token.type == TokenType.NUMBER) {
             pos++;
@@ -117,7 +117,7 @@
             } else if (token.type == TokenType.OPERATOR && token.value == '-') {
                 pos++;
-                int nextTerm = term();
+                int nextTerm = factor();
                 if (token.value == '-') {
                     result -= nextTerm;
                 }
