--- before.c
+++ after.c
@@ -106,7 +106,8 @@
     Token* stack = parse(tokens);
 
     while (stack[top = top - 1].type != EOF && stack[top].type != NUMBER) {
-        if (stack[top].type == PLUS) {
+        if (top >= 0 && stack[top].type == PLUS) {
             double operand2 = stack[++top].value;
             double operand1 = stack[++top].value;
             stack[top] = { stack[top].type, operand1 + operand2 };
-        } else if (stack[top].type == MINUS) {
+        } else if (top >= 0 && stack[top].type == MINUS) {
             double operand2 = stack[++top].value;
             double operand1 = stack[++top].value;
             stack[top] = { stack[top].type, operand1 - operand2 };
-        } else if (stack[top].type == MUL) {
+        } else if (top >= 0 && stack[top].type == MUL) {
             double operand2 = stack[++top].value;
             double operand1 = stack[++top].value;
             stack[top] = { stack[top].type, operand1 * operand2 };
-        } else if (stack[top].type == DIV) {
+        } else if (top >= 0 && stack[top].type == DIV) {
             double operand2 = stack[++top].value;
             double operand1 = stack[++top].value;
             stack[top] = { stack[top].type, operand1 / operand2 };
-        }
     }

     return stack[top].value;
