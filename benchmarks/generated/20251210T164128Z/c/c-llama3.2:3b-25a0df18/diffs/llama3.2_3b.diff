--- before.c
+++ patched_before.c
@@ -120,7 +120,8 @@
   double evaluator(void* tree) {
-    // Evaluate the expression using a stack-based approach
+    void** operator_stack = malloc(sizeof(void*));
     double result = 0.0;
     int operator_stack_size = 0;

     while (1) {
-        if (*(void***)(operator_stack) == NULL) {
+        if (operator_stack_size > 0) {
             // Pop an operator from the stack
             void** op_token = *(void**)(operator_stack);
             double op_value = 0.0;
             if (op_token->type != EOF) {
                 op_value = atof(op_token->str);
             }

-            // Evaluate the expression using the operator and operands
+            // Apply the operator to the operands
             switch (op_value) {
                 case '+':
                     result += operand_value;
                     break;
                 case '-':
                     result -= operand_value;
                     break;
                 case '*':
                     result *= operand_value;
                     break;
                 case '/':
                     result /= operand_value;
                     break;
             }

-            // Pop the operands from the stack
+        } else {
             // Pop an operator from the stack
             void** op_token = *(void**)(operator_stack);
             double op_value = 0.0;
             if (op_token->type != EOF) {
                 op_value = atof(op_token->str);
             }

-            // Evaluate the expression using the operator and operands
+            // Pop an operator from the stack
             switch (op_value) {
                 case '+':
                     result += 1.0;
                     break;
                 case '-':
                     result -= 1.0;
                     break;
                 case '*':
                     result *= 1.0;
                     break;
                 case '/':
                     result /= 1.0;
                     break;
             }

-            // Pop the operator from the stack
+        }
     } else {
         // Push an operand onto the stack
         void*** operand_node = malloc(sizeof(void***));
         operand_node->type = NUMBER;
         operand_node->value = 0.0;
         operand_node->str = strdup("1");
-            operand_stack_size++;
-            operand_stack = *(void***)(operand_node);
+        operand_stack_size++;
+        operand_stack = operand_node;
     }
 }
