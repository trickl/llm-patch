--- before.c
+++ patched_before.c
@@ -38,7 +38,7 @@
             case '+': case '-': case '*': case '/':
                 tokens[i].type = PLUS;
                 if (!tokens[i].str) {
-                    tokens[i].str = malloc(3 * sizeof(char));
+                    tokens[i].str = malloc(2 * sizeof(char));
                     sprintf(tokens[i].str, "%c", expression[i]);
                 }
                 break;
@@ -113,7 +113,7 @@
             case LPAREN:
                 tokens[i].type = LPAREN;
-                if (!tokens[i].str) {
+                if (!tokens[i].str) {
                     tokens[i].str = malloc(2 * sizeof(char));
                     sprintf(tokens[i].str, "(");
                 }
                 break;
@@ -137,7 +137,7 @@
             case NUMBER:
                 switch (operator->type) {
-                    case PLUS:
-                        output->value += value;
+                    case PLUS:
+                        output->value += value;
                         break;
-                    case MINUS:
-                        output->value -= value;
+                    case MINUS:
+                        output->value -= value;
                         break;
-                    case MUL:
-                        output->value *= value;
+                    case MUL:
+                        output->value *= value;
                         break;
-                    case DIV:
+                    case DIV:
+                        if (operand2->value == 0) {
+                            free(operand1);
+                            free(operator);
+                            return NULL;
+                        }
+                        output->value = operand1->value / operand2->value;
                         break;
