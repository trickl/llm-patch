```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define MAX_TOKENS 100

typedef enum {
    TOKEN_NUMBER,
    TOKEN_PLUS,
    TOKEN_MINUS,
    TOKEN_MULTIPLY,
    TOKEN_DIVIDE,
    TOKEN_LPAREN,
    TOKEN_RPAREN,
    TOKEN_EOF
} TokenType;

typedef struct {
    TokenType type;
    int value;
} Token;

Token tokens[MAX_TOKENS];
int token_index = 0;

void error(const char *message) {
    fprintf(stderr, "Error: %s\n", message);
    exit(EXIT_FAILURE);
}

void skip_whitespace(char **input) {
    while (**input && isspace(**input)) (*input)++;
}

Token get_next_token(char **input) {
    skip_whitespace(input);

    if (!**input) return (Token){TOKEN_EOF};

    char ch = **input;
    (*input)++;

    switch (ch) {
        case '+': return (Token){TOKEN_PLUS};
        case '-': return (Token){TOKEN_MINUS};
        case '*': return (Token){TOKEN_MULTIPLY};
        case '/': return (Token){TOKEN_DIVIDE};
        case '(': return (Token){TOKEN_LPAREN};
        case ')': return (Token){TOKEN_RPAREN};
    }

    if (isdigit(ch)) {
        int value = 0;
        while (**input && isdigit(**input)) {
            value = value * 10 + (**input - '0');
            (*input)++;
        }
        return (Token){TOKEN_NUMBER, value};
    }

    error("Unexpected character");
}

int precedence(TokenType type) {
    switch (type) {
        case TOKEN_PLUS:
        case TOKEN_MINUS: return 1;
        case TOKEN_MULTIPLY:
        case TOKEN_DIVIDE: return 2;
        default: return 0;
    }
}

int apply_operator(int a, int b, TokenType operator) {
    switch (operator) {
        case TOKEN_PLUS: return a + b;
        case TOKEN_MINUS: return a - b;
        case TOKEN_MULTIPLY: return a * b;
        case TOKEN_DIVIDE: return a / b;
        default: error("Invalid operator");
    }
}

int evaluate_expression(char **input) {
    Token current_token = get_next_token(input);
    if (current_token.type == TOKEN_NUMBER) {
        int value = current_token.value;
        current_token = get_next_token(input);
        if (current_token.type == TOKEN_MINUS) {
            return -evaluate_expression(input);
        }
        ungetc(current_token.type, stdin);
        return value;
    }

    if (current_token.type != TOKEN_LPAREN) error("Expected '('");

    int result = evaluate_expression(input);

    current_token = get_next_token(input);
    if (current_token.type != TOKEN_RPAREN) error("Expected ')'");

    while (1) {
        current_token = get_next_token(input);
        if (current_token.type == TOKEN_EOF) break;

        if (current_token.type != TOKEN_PLUS && current_token.type != TOKEN_MINUS &&
            current_token.type != TOKEN_MULTIPLY && current_token.type != TOKEN_DIVIDE)
            error("Expected operator");

        int right = evaluate_expression(input);

        result = apply_operator(result, right, current_token.type);
    }

    return result;
}

int main() {
    char input[1024];
    printf("Enter an expression: ");
    fgets(input, sizeof(input), stdin);

    Token *token = tokens;
    token->type = TOKEN_NUMBER;
    token->value = evaluate_expression(&input);
    printf("Result: %d\n", token->value);

    return 0;
}
```