--- before.ts
+++ before.ts
@@ -1,3 +1,4 @@
 import { strict as assert } from 'assert';
+import * as process from 'process';

 enum TokenType {
   NUMBER,
@@ -176,5 +177,5 @@ export function evaluateExpression(input: string): number {
 }

 // CLI example
-if (require.main === module) {
+if (process.mainModule === module) {
   const input = process.argv[2];
   if (!input) {
     console.log('Usage: node expression_evaluator.ts "expression"');
