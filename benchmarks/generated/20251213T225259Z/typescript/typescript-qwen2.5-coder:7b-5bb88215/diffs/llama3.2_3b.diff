--- before.ts
+++ patched_before_ts
@@ -106,7 +106,8 @@
   } else if (token.value === '(') {
     operatorStack.push(token.value);
   } else if (token.value === ')') {
-    while (operatorStack.length > 0 && operatorStack[operatorStack.length - 1] !== '(') {
+    while (operatorStack.length > 0 && operatorStack[operatorStack.length - 1] !== '(') {
       outputQueue.push(operatorStack.pop()!);
   }
     operatorStack.pop(); // Remove the '('
-    } else {
+    } else {
       while (
         operatorStack.length > 0 &&
-        precedence[token.value] <= precedence[operatorStack[operatorStack.length - 1]]
+        precedence[token.value] <= precedence['(']
       ) {
         outputQueue.push(operatorStack.pop()!);
       }
       operatorStack.push(token.value);
