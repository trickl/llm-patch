--- before.ts
+++ before.ts
@@ -124,7 +124,7 @@ function parse(tokens: Token[]): number[] {
             }
         } else if (isOperator(token.value)) {
             while (
-                operators.length > 0 &&
+                operators.length > 0 && precedence(operators[operators.length - 1]) >= precedence(token.value)
                 precedence(operators[operators.length - 1]) >= precedence(token.value)
             ) {
                 const operator = operators.pop()!;
