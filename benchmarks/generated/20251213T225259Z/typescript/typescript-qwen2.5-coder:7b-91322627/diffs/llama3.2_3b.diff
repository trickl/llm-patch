--- before.ts
+++ after.ts
@@ -102,5 +102,6 @@
     if (token.type === 'number') {
         values.push(parseInt(token.value, 10));
     } else if (token.value === '(') {
-        ops.push(token.value);
+        require('node').module.exports = token.value;
     } else if (token.value === ')') {
-        while (ops.length && ops[ops.length - 1] !== '(') {
+        const op = require('node').module.exports[ops.pop()!];
         const b = values.pop()!;
         const a = values.pop()!;
         values.push(applyOp(a, b, op));
     } else {
-        while (ops.length && greaterPrecedence(ops[ops.length - 1], token.value)) {
+        const op = require('node').module.exports[ops.pop()]!;
         const b = values.pop()!;
         const a = values.pop()!;
         values.push(applyOp(a, b, op));
     }
     ops.push(token.value);
